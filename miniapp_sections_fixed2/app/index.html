
<!doctype html>
<html lang="ru" data-theme="dark" data-ctor-mode="design">

<head>


  <!-- ... —Ç–≤–æ–∏ –º–µ—Ç–∞, —Å—Ç–∏–ª–∏ –∏ —Ç.–ø. ... -->

  <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ API –¥–ª—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ -->
  <script>
    // –≥–æ–≤–æ—Ä–∏–º —Å—Ç—É–¥–∏–∏, –∫—É–¥–∞ —Å–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã
    // Same-origin API via Worker Route: /api/*
    window.CTOR_API_BASE = '';
  </script>

  <!-- studio.js –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –≤–Ω–∏–∑—É –ø–æ—Å–ª–µ templates.js -->




  
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Mini‚ÄëApp Constructor ‚Äî Studio v1.9.1-stable</title>
  <link rel="stylesheet" href="studio.css"/>
  <style>
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:50}
    .modal.on{display:flex}
    .dlg{width:min(900px,92vw);max-height:84vh;background:#0f1522;border:1px solid #1b2433;border-radius:16px;overflow:hidden;display:flex;flex-direction:column}
    .dlg-h{padding:10px 12px;border-bottom:1px solid #1b2433;display:flex;gap:8px;align-items:center}
    .dlg-b{padding:12px;min-height:0;overflow:auto;display:grid;gap:10px}
    .dlg-f{padding:10px 12px;border-top:1px solid #1b2433;display:flex;gap:8px;justify-content:flex-end}
    .grid2{display:grid;grid-template-columns:1fr auto;gap:8px}
    .klist{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:10px}
    .kitem{display:grid;gap:8px;padding:10px;border:1px dashed #2a3346;border-radius:12px;background:rgba(255,255,255,.03)}
    .kitem .pv{border:1px solid #2a3346;border-radius:10px;padding:8px;background:#0c1320}
    .search{height:36px;border:1px solid #1b2433;background:#0e1420;border-radius:10px;padding:0 10px;width:100%}
    .smallmut{color:#92a6c4;font-size:12px}
    .inline{display:flex;gap:6px;align-items:center}
    .edit{margin-top:6px;border:1px dashed #2a3346;padding:8px;border-radius:8px;background:#0e1526}
    .edit label{display:block;font-size:12px;color:#9fb1c9;margin:6px 0 2px}
    .edit input[type="text"]{width:100%;height:32px;border:1px solid #2a3346;background:#0c1320;border-radius:8px;padding:0 8px}
    .edit .row2{display:grid;grid-template-columns:1fr 1fr;gap:8px}



    /* =========================
   Global Thin Scrollbars
   (stylish, dark UI)
   ========================= */

/* Firefox */
*{
  scrollbar-width: thin;
  scrollbar-color: rgba(255,255,255,.18) transparent;
}

/* Chromium / Safari */
*::-webkit-scrollbar{
  width: 10px;      /* –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π */
  height: 10px;     /* –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π */
}

*::-webkit-scrollbar-track{
  background: transparent;
}

*::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,.16);
  border-radius: 999px;
  border: 3px solid transparent;  /* –¥–µ–ª–∞–µ—Ç thumb –≤–∏–∑—É–∞–ª—å–Ω–æ —Ç–æ–Ω—å—à–µ */
  background-clip: padding-box;
}

*::-webkit-scrollbar-thumb:hover{
  background: rgba(255,255,255,.28);
  background-clip: padding-box;
}

*::-webkit-scrollbar-corner{
  background: transparent;
}

/* =========================
   App switcher in header
   ========================= */
.appSwitchBox{display:flex;align-items:center;min-width:220px;max-width:420px}
.appSwitch{
  width:100%;
  height:38px;
  border-radius:12px;
  border:1px solid rgba(148,163,184,.22);
  background:rgba(255,255,255,.06);
  color:inherit;
  font-weight:900;
  letter-spacing:.2px;
  padding:0 10px;
  outline:none;
}
.appSwitch:focus{border-color:rgba(99,102,241,.6)}
.appSwitch option{background:#0f1522;color:#e5e7eb}

</style>

  <style id="studioThemeOverrides">
    /* Light theme overrides for Studio embed */
    html[data-theme="light"] body{background:#f4f6fb;color:#0b1220}
    html[data-theme="light"] .panel{background:#ffffff;border-color:#d9e2ef}
    html[data-theme="light"] .hdr{background:#ffffff;border-color:#d9e2ef}
    html[data-theme="light"] .btn{background:#f2f5fb;border-color:#d9e2ef;color:#0b1220}
    html[data-theme="light"] .btn.good{background:#e9f7ef;border-color:#b7e1c5;color:#0b1220}
    html[data-theme="light"] .help, html[data-theme="light"] .mut{color:#51627a}
    html[data-theme="light"] .acc-b{background:#ffffff;border-color:#d9e2ef}
    html[data-theme="light"] input, html[data-theme="light"] select{background:#ffffff;color:#0b1220;border-color:#d9e2ef}
    html[data-theme="light"] .list .item{background:#ffffff;border-color:#d9e2ef}
    html[data-theme="light"] .ctxmenu{background:#ffffff;border-color:#d9e2ef;color:#0b1220}
    /* keep preview phone area on light */
    html[data-theme="light"] .phone{background:#0b0f16}
  </style>
  <script>
    (function(){
      function applyTheme(t){
        document.documentElement.setAttribute('data-theme', (t==='light') ? 'light' : 'dark');
      }

      // Seamless embed mode (when constructor is mounted inside the Work Panel)
      try{
        const qs = new URLSearchParams(location.search);
        if (qs.get('embed') === '1'){
          document.documentElement.classList.add('embed-seamless');
          // pass-through: host sidebar width (so the left studio panel can hide beneath it)
          const hostW = qs.get('host_side_w');
          if (hostW){
            document.documentElement.style.setProperty('--host-side-w', hostW);
          }
        }
      }catch(_){ }

      window.addEventListener('message', function(e){
        const d = e && e.data;
        if (!d || d.type!=='theme') return;
        applyTheme(d.theme);
      });
      // initial: try read parent saved theme key (if same-origin)
      try{
        const t = localStorage.getItem('panel_theme');
        if (t) applyTheme(t);
      }catch(_){}
    })();
  </script>

</head>
<body>
  <div class="app">
    <!-- LEFT -->
    <div class="panel panel-left">
      <div class="hdr ctorHdr">
  

<div class="ctorHdr-actions ctorTabs">
  <button class="btn smallbtn ctorBtn is-active" data-ctor-tab="design" aria-pressed="true">–î–∏–∑–∞–π–Ω</button>
  <button class="btn smallbtn ctorBtn" data-ctor-tab="panel" aria-pressed="false">–ü–∞–Ω–µ–ª—å</button>
</div>


  <!-- –æ—Å—Ç–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç, —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ –ª–æ–º–∞–ª–æ—Å—å, –Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ CSS -->
  <button id="panelHide" class="btn smallbtn" aria-hidden="true">‚Æú</button>
</div>

      <!-- nav ear moved outside .panel-left so it can stay visible when the panel slides under the host sidebar -->
<div class="body row">

  <div class="help">
    –î–æ–±–∞–≤–ª—è–π –≤–∫–ª–∞–¥–∫–∏ –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π –±–ª–æ–∫–∏; –ø—Ä–µ–≤—å—é –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ –∫–Ω–æ–ø–∫–µ.
  </div>

  <div class="app-id-row">
    <label>App ID <small>–∫–ª—é—á</small><input id="app_id" value="my_app"/></label>
  </div>

  <!-- ===================== TAB: DESIGN ===================== -->
  <div class="ctorSection" id="ctorDesignSection">

<div class="acc-b">

  <div class="themeAccs">

    <!-- –ë–ê–ó–ê -->
    <div class="acc open themeSubAcc" data-acc="base">
      <div class="acc-h">
        <span class="acc-ico">üéõÔ∏è</span>
        <div class="acc-titleRow"><b>–ë–∞–∑–∞</b></div>
        <div style="flex:1"></div>
      </div>
      <div class="acc-b">
        <div class="themeGrid">
          <div class="themeGroup">

            <label>Background
              <input type="color" id="t_bg" value="#0f1219">
            </label>

            <label>Surface
              <input type="color" id="t_surface" value="#121a2a">
            </label>

            <label>Card
              <input type="color" id="t_card" value="#101827">
            </label>

            <label>Border
              <input type="color" id="t_border" value="#263048">
            </label>

            <label>Text
              <input type="color" id="t_text" value="#e8f0ff">
            </label>

            <label>Muted
              <input type="color" id="t_muted" value="#97aac4">
            </label>

          </div>
        </div>
      </div>
    </div>

    <!-- –ë–†–ï–ù–î -->
    <div class="acc themeSubAcc" data-acc="brand">
      <div class="acc-h">
        <span class="acc-ico">‚ú®</span>
        <div class="acc-titleRow"><b>–ë—Ä–µ–Ω–¥</b></div>
        <div style="flex:1"></div>
      </div>
      <div class="acc-b">
        <div class="themeGrid">
          <div class="themeGroup">

            <label>Brand / Accent
              <input type="color" id="t_brand" value="#7C5CFF">
            </label>

            <label>Brand soft (–ø–æ–¥–ª–æ–∂–∫–∏)
              <input type="color" id="t_brandSoft" value="#2A2352">
            </label>

            <label>Success
              <input type="color" id="t_success" value="#2dd4bf">
            </label>

            <label>Warning
              <input type="color" id="t_warning" value="#fbbf24">
            </label>

            <label>Danger
              <input type="color" id="t_danger" value="#fb7185">
            </label>

          </div>
        </div>
      </div>
    </div>

    <!-- –ö–ù–û–ü–ö–ò -->
    <div class="acc themeSubAcc" data-acc="buttons">
      <div class="acc-h">
        <span class="acc-ico">üîò</span>
        <div class="acc-titleRow"><b>–ö–Ω–æ–ø–∫–∏</b></div>
        <div style="flex:1"></div>
      </div>
      <div class="acc-b">
        <div class="themeGrid">
          <div class="themeGroup">

            <label>Primary BG
              <input type="color" id="t_btnPrimaryBg" value="#7C5CFF">
            </label>

            <label>Primary Text
              <input type="color" id="t_btnPrimaryText" value="#ffffff">
            </label>

            <label>Secondary BG
              <input type="color" id="t_btnSecondaryBg" value="#1a2336">
            </label>

            <label>Secondary Text
              <input type="color" id="t_btnSecondaryText" value="#e8f0ff">
            </label>

          </div>
        </div>
      </div>
    </div>

    <!-- –ù–ê–í–ë–ê–† / SHEET -->
    <div class="acc themeSubAcc" data-acc="nav">
      <div class="acc-h">
        <span class="acc-ico">üìå</span>
        <div class="acc-titleRow"><b>–ù–∞–≤–±–∞—Ä / Sheet</b></div>
        <div style="flex:1"></div>
      </div>
      <div class="acc-b">
        <div class="themeGrid">
          <div class="themeGroup">

            <label>Tabbar BG
              <input type="color" id="t_tabBg" value="#0c0d12">
            </label>

            <label>Tabbar Text
              <input type="color" id="t_tabText" value="#97aac4">
            </label>

            <label>Tabbar Active
              <input type="color" id="t_tabActive" value="#ffffff">
            </label>

            <label>Overlay (–º–æ–¥–∞–ª–∫–∏)
              <input type="color" id="t_overlay" value="#000000">
            </label>

          </div>
        </div>
      </div>
    </div>

    <!-- –†–ê–î–ò–£–°–´ -->
    <div class="acc themeSubAcc" data-acc="radius">
      <div class="acc-h">
        <span class="acc-ico">‚¨ö</span>
        <div class="acc-titleRow"><b>–†–∞–¥–∏—É—Å—ã</b></div>
        <div style="flex:1"></div>
      </div>
      <div class="acc-b">
        <div class="themeGrid">
          <div class="themeGroup">

            <label>Card radius
              <input type="number" id="t_radiusCard" value="16" min="0" max="40" step="1">
            </label>

            <label>Button radius
              <input type="number" id="t_radiusBtn" value="14" min="0" max="40" step="1">
            </label>

            <label>Input radius
              <input type="number" id="t_radiusInput" value="12" min="0" max="40" step="1">
            </label>

          </div>
        </div>
      </div>
    </div>

    <!-- –¢–ï–ù–ò / GLOW -->
    <div class="acc themeSubAcc" data-acc="shadow">
      <div class="acc-h">
        <span class="acc-ico">üå´Ô∏è</span>
        <div class="acc-titleRow"><b>–¢–µ–Ω–∏ / Glow</b></div>
        <div style="flex:1"></div>
      </div>
      <div class="acc-b">
        <div class="themeGrid">
          <div class="themeGroup">

            <label>Card shadow (0..1)
              <input type="range" id="t_shadowCard" value="0.35" min="0" max="1" step="0.01">
            </label>

            <label>Focus glow (0..1)
              <input type="range" id="t_glow" value="0.35" min="0" max="1" step="0.01">
            </label>

          </div>
        </div>
      </div>
    </div>

    <!-- –®–†–ò–§–¢–´ -->
    <div class="acc themeSubAcc" data-acc="fonts">
      <div class="acc-h">
        <span class="acc-ico">Aa</span>
        <div class="acc-titleRow"><b>–¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞</b></div>
        <div style="flex:1"></div>
      </div>
      <div class="acc-b">
        <div class="themeGrid">
          <div class="themeGroup">

            <label>Body font
              <select id="t_fontBody">
                <option value="Inter">Inter</option>
                <option value="system">System UI</option>
              </select>
            </label>

            <label>Heading font
              <select id="t_fontHead">
                <option value="Montserrat">Montserrat</option>
                <option value="Inter">Inter</option>
                <option value="system">System UI</option>
              </select>
            </label>

            <label>Base font size
              <input type="number" id="t_fontSize" value="14" min="12" max="18" step="1">
            </label>

          </div>
        </div>
      </div>
    </div>

  </div><!-- /.themeAccs -->

  <div class="themeRow" style="margin-top:10px">
    <button class="btn" id="t_preset_dark">Preset: Dark Pro</button>
    <button class="btn" id="t_preset_light">Preset: Light Pro</button>
    <button class="btn" id="t_preset_brand">Preset: Brand Neon</button>
  </div>

  <div class="smallmut">–í—Å–µ –±–ª–æ–∫–∏ –∏ UI –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (design tokens). –≠—Ç–æ ‚ÄúFigma-—É—Ä–æ–≤–µ–Ω—å‚Äù —Ç–µ–º–∞.</div>

</div>


    </div>

  </div>

  <!-- ===================== TAB: PANEL ===================== -->
  <div class="ctorSection" id="ctorPanelSection">

    <!-- –í–ê–ñ–ù–û: –Ω–∏–∫–∞–∫–æ–≥–æ sep –î–û nav_list, —á—Ç–æ–±—ã —Å–ø–∏—Å–æ–∫ –Ω–∞—á–∏–Ω–∞–ª—Å—è —Å—Ä–∞–∑—É –ø–æ–¥ help -->
    <div class="list" id="nav_list"></div>

    <div class="sep"></div>

    <div class="grid2">
      <input id="route_new" value="" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –ø—É—Ç—å"/>
      <button id="route_add" class="btn">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</button>
    </div>

  </div>

</div><!-- /.body.row -->


      <!-- –£—à–∫–æ –∫–∞–∫ —á–∞—Å—Ç—å —Ñ–æ—Ä–º—ã –ø–∞–Ω–µ–ª–∏ (–Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–ª–∞–≤–∞—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç) -->
      <button class="nav-ear" id="navEar" type="button" aria-label="–°–≤–µ—Ä–Ω—É—Ç—å/—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –º–µ–Ω—é">‚Æû</button>
    </div><!-- /.panel-left -->

    <!-- CENTER -->
    <div class="panel centerWrap">
      <div class="hdr">
        <div class="appSwitchBox" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç">
          <select id="appSwitch" class="appSwitch" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞"></select>
        </div>
        <div style="flex:1"></div>
        <div class="mut"></div>
        <button class="btn" data-preset="iphone-13">iPhone 13</button>
        <button class="btn" data-preset="iphone-se">iPhone SE</button>
        <button class="btn" data-preset="pixel-7">Pixel 7</button>
        <div style="width:10px"></div>
        <div style="flex:1"></div>
        <button id="undo" class="btn">‚Ü∂ –û—Ç–º–µ–Ω–∏—Ç—å</button>
        <button id="redo" class="btn">‚Ü∑ –í–µ—Ä–Ω—É—Ç—å</button>
        <button id="save" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button id="publish" class="btn good">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
      </div>
      <div class="phoneArea">
<div class="zoomRail" aria-label="–ú–∞—Å—à—Ç–∞–±">
  <div class="zr-label">–ú–∞—Å—à—Ç–∞–±</div>
  <input id="zoom" class="zr-slider" type="range" min="30" max="130" value="100"/>
  <div id="zoom_val" class="zr-val mut">100%</div>
</div>

        <div class="phoneDock" id="dock">
          <div class="phone" id="phone">
            <div class="notch"></div>
            <div class="screen"><iframe id="frame" src="../preview/index.html?preview=draft&app_id=my_app"></iframe></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Blocks Library Modal -->
  <div class="modal" id="blocksModal">
    <div class="dlg">
      <div class="dlg-h"><b>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –±–ª–æ–∫–æ–≤</b><span id="modalRoute" class="badge">/</span><div style="flex:1"></div><button id="mClose" class="btn">–ó–∞–∫—Ä—ã—Ç—å</button></div>
      <div class="dlg-b">
        <div class="grid2">
          <input id="mSearch" class="search" placeholder="–ü–æ–∏—Å–∫ –±–ª–æ–∫–∞..."/>
          <div id="mCats" class="chips"></div>
          <button id="mSelectAll" class="btn">–í—ã–±—Ä–∞—Ç—å –≤—Å—ë</button>
        </div>
        <div id="mList" class="klist"></div>
      </div>
      <div class="dlg-f">
        <button id="mApply" class="btn primary">–ì–æ—Ç–æ–≤–æ</button>
      </div>
    </div>
  </div>

  <!-- Block Editor Modal -->
  <div class="modal" id="blockEditor">
    <div class="dlg">
      <div class="dlg-h"><b>–†–µ–¥–∞–∫—Ç–æ—Ä –±–ª–æ–∫–∞</b><span id="beTitle" class="badge"></span><div style="flex:1"></div><button id="beClose" class="btn">–ó–∞–∫—Ä—ã—Ç—å</button></div>
      <div class="dlg-b" id="beBody"></div>
      <div class="dlg-f">
        <button id="beDelete" class="btn danger">–£–¥–∞–ª–∏—Ç—å –±–ª–æ–∫</button>
        <div style="flex:1"></div>
        <button id="beApply" class="btn primary">–ì–æ—Ç–æ–≤–æ</button>
      </div>
    </div>
  </div>

  <!-- Rename Page Modal -->
  <div class="modal" id="renameModal">
    <div class="dlg">
      <div class="dlg-h">
        <b>–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</b>
        <span id="renamePath" class="badge"></span>
        <div style="flex:1"></div>
      </div>
      <div class="dlg-b">
        <label class="lbl">–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</label>
        <input id="renameInput" class="search" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ì–ª–∞–≤–Ω–∞—è" />
      </div>
      <div class="dlg-f">
        <button id="renameCancel" class="btn">–û—Ç–º–µ–Ω–∞</button>
        <button id="renameSave" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- Icon Picker Modal -->
  <div class="modal" id="iconPicker">
    <div class="dlg">
      <div class="dlg-h"><b>–ò–∫–æ–Ω–∫–∞ –≤–∫–ª–∞–¥–∫–∏</b><div style="flex:1"></div><button class="btn" data-close>–ó–∞–∫—Ä—ã—Ç—å</button></div>
      <div class="dlg-b" id="iconGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:8px;padding:10px"></div>
      <div class="dlg-f">
        <label class="btn"><input type="file" id="iconUpload" accept="image/*" style="display:none">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ—é</label>
        <button class="btn primary" data-close>–ì–æ—Ç–æ–≤–æ</button>
      </div>
    </div>
  </div>

    <!-- New Page Modal -->
  <div class="modal" id="routeNameModal">
    <div class="dlg">
      <div class="dlg-h">
        <b>–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</b>
      </div>
      <div class="dlg-b edit">
        <label>–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</label>
        <input id="routeNameInput" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –ì–ª–∞–≤–Ω–∞—è">
      </div>
      <div class="dlg-f">
        <button class="btn" id="routeNameCancel">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn primary" id="routeNameSave">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>


  <script src="templates.js?v=step21"></script>
  <script src="studio.js?v=step21"></script>
  <div id="ctxMenu" class="ctxmenu" style="display:none"></div>
  <script src="../../panel_shell.js"></script>
</body>
</html>
