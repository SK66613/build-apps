/* ===== Local fonts (Telegram-safe) ===== */
@font-face{
  font-family: "Inter";
  src: url("/fonts/Inter-roman.var.woff2") format("woff2");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}
@font-face{
  font-family: "Montserrat";
  src: url("/fonts/Montserrat-Regular.woff2") format("woff2");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

:root{
  /* ===== Fallback tokens (used only if theme.css is absent) ===== */
  --color-bg-fallback:#0f1219;
  --color-surface-fallback:#121a2a;
  --color-card-fallback:#101827;
  --color-border-fallback:#263048;
  --color-text-fallback:#e8f0ff;
  --color-muted-fallback:#97aac4;

  --color-brand-fallback:#7C5CFF;
  --color-brand-soft-fallback:#2A2352;

  --btn-primary-bg-fallback:#7C5CFF;
  --btn-primary-text-fallback:#ffffff;
  --btn-secondary-bg-fallback:#1a2336;
  --btn-secondary-text-fallback:#e8f0ff;

  --tabbar-bg-fallback:#0c0d12;
  --tabbar-text-fallback:#97aac4;
  --tabbar-active-fallback:#ffffff;

  --radius-card-fallback:16px;
  --radius-btn-fallback:14px;
  --radius-input-fallback:12px;

  --shadow-card-fallback:0 16px 40px rgba(0,0,0,.18);
  --shadow-soft-fallback:0 8px 24px rgba(0,0,0,.12);
  --glow-brand-fallback:0 0 0 2px rgba(124,92,255,.35), 0 0 24px rgba(124,92,255,.22);

  --font-body-fallback: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --font-head-fallback: Montserrat, Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --font-size-fallback:14px;

  /* ===== Actual tokens (theme.css will override these if loaded later) ===== */
  --color-bg: var(--color-bg-fallback);
  --color-surface: var(--color-surface-fallback);
  --color-card: var(--color-card-fallback);
  --color-border: var(--color-border-fallback);
  --color-text: var(--color-text-fallback);
  --color-muted: var(--color-muted-fallback);

  --color-brand: var(--color-brand-fallback);
  --color-brand-soft: var(--color-brand-soft-fallback);

  --btn-primary-bg: var(--btn-primary-bg-fallback);
  --btn-primary-text: var(--btn-primary-text-fallback);
  --btn-secondary-bg: var(--btn-secondary-bg-fallback);
  --btn-secondary-text: var(--btn-secondary-text-fallback);

  --tabbar-bg: var(--tabbar-bg-fallback);
  --tabbar-text: var(--tabbar-text-fallback);
  --tabbar-active: var(--tabbar-active-fallback);

  --radius-card: var(--radius-card-fallback);
  --radius-btn: var(--radius-btn-fallback);
  --radius-input: var(--radius-input-fallback);

  --shadow-card: var(--shadow-card-fallback);
  --shadow-soft: var(--shadow-soft-fallback);
  --glow-brand: var(--glow-brand-fallback);

  --font-body: var(--font-body-fallback);
  --font-head: var(--font-head-fallback);
  --font-size: var(--font-size-fallback);

  /* safe-area / tabbar sizing */
  --safe-bottom: min(env(safe-area-inset-bottom, 0px), 20px);
  --tabbar-h: 64px;

  /* legacy mapping */
  --bg: var(--color-bg);
  --fg: var(--color-text);
  --sub: var(--color-muted);
  --acc: var(--color-brand);
  --line: rgba(255,255,255,.10);

  /* === aliases for blocks (bridge) === */
  --accent: var(--color-brand);
  --onAccent: var(--btn-primary-text);
  --text: var(--color-text);
  --muted: var(--color-muted);

  --surface: var(--color-surface);
  --surface2: var(--color-surface); /* fallback */
  --card: var(--color-card);

  --card-bg: var(--color-card);
  --card-border: var(--color-border);

  --brand: var(--color-brand);
  --btnPrimaryBg: var(--btn-primary-bg);
  --btnPrimaryText: var(--btn-primary-text);

  --r-card: var(--radius-card);
  --r-btn: var(--radius-btn);
  --r-input: var(--radius-input);

  --shadow-a: .35;
  --glow-a: .35;
}


/* ===== Global typography bridge (FORCE blocks to inherit) ===== */
html,body{height:100%}
html, body{
  font-family: var(--font-body);
  font-size: var(--font-size);
}

body{
  margin:0;
  background:var(--color-bg);
  color:var(--color-text);
  line-height:1.55;
}

/* headings */
h1,h2,h3,h4,h5,h6,
.h1,.h2,.h3{
  font-family: var(--font-head);
}

/* Force inheritance inside blocks */
.blk, .block, [data-block], [data-key], [data-block-id]{
  font-family: inherit;
}
.blk *, .block *, [data-block] *, [data-key] *, [data-block-id] *{
  font-family: inherit;
}

/* Layout */
.container{
  padding:16px 16px calc(var(--tabbar-h) + var(--safe-bottom) + 20px);
}

/* ===== Cards ===== */
.card{
  background: var(--color-card);
  border:1px solid var(--color-border);
  border-radius: var(--radius-card);
  padding:12px;
  box-shadow: var(--shadow-soft);
}

/* ===== Section container ("Раздел") ===== */
.sec{
  padding:12px;
  background: var(--color-surface);
  border-radius: var(--radius-card);
}
.sec__hd{
  font-weight:800;
  font-size:18px;
  margin:2px 2px 10px;
  opacity:.95;
}
.sec__bd{
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* ===== Tabbar ===== */
.tabbar{
  position:fixed;
  left:0; right:0; bottom:0;
  height: calc(var(--tabbar-h) + var(--safe-bottom));
  padding-bottom: max(0px, calc(var(--safe-bottom) - 16px));

  background: var(--tabbar-bg);
  border-top:1px solid var(--color-border);

  backdrop-filter:blur(16px);
  -webkit-backdrop-filter:blur(16px);

  display:grid;
  grid-template-columns:repeat(5,1fr);
  align-items:center;
  z-index:10;
}

.tab{
  display:grid;
  gap:3px;
  place-items:center;
  color:var(--tabbar-text);
  font-size:12px;
  cursor:pointer;
}
.tab.active{color:var(--tabbar-active)}

/* System box */
.sys{
  border:1px dashed var(--line);
  border-radius:14px;
  padding:12px;
  background:rgba(255,255,255,.03)
}
.sys h4{margin:0 0 8px}


.themeGroupTitle{
  font-weight: 900;
  font-size: 13px;
  opacity: .9;
  margin: 2px 0 10px;
}
.themeRow{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  align-items:center;
}
label.chk{ display:flex; gap:8px; align-items:center; }
.themeNote{
  font-size: 12px;
  opacity: .75;
  line-height: 1.3;
}
.themeNote code{
  padding:2px 6px;
  border-radius:8px;
  background: rgba(255,255,255,.06);
}
