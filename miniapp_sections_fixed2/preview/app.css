/* ===== Local fonts (Telegram-safe) ===== */
@font-face{
  font-family: "Inter";
  src: url("/fonts/Inter-roman.var.woff2") format("woff2");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}
@font-face{
  font-family: "Montserrat";
  src: url("/fonts/Montserrat-Regular.woff2") format("woff2");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

:root{
  /* Figma tokens (default fallback) */
:root{
  --color-bg: var(--color-bg, #0f1219);
  --color-surface: var(--color-surface, #121a2a);
  --color-card: var(--color-card, #101827);
  --color-border: var(--color-border, #263048);
  --color-text: var(--color-text, #e8f0ff);
  --color-muted: var(--color-muted, #97aac4);

  --color-brand: var(--color-brand, #7C5CFF);
  --color-brand-soft: var(--color-brand-soft, #2A2352);

  --btn-primary-bg: var(--btn-primary-bg, #7C5CFF);
  --btn-primary-text: var(--btn-primary-text, #ffffff);
  --btn-secondary-bg: var(--btn-secondary-bg, #1a2336);
  --btn-secondary-text: var(--btn-secondary-text, #e8f0ff);

  --tabbar-bg: var(--tabbar-bg, #0c0d12);
  --tabbar-text: var(--tabbar-text, #97aac4);
  --tabbar-active: var(--tabbar-active, #ffffff);

  --radius-card: var(--radius-card, 16px);
  --radius-btn: var(--radius-btn, 14px);
  --radius-input: var(--radius-input, 12px);

  --shadow-card: var(--shadow-card, 0 16px 40px rgba(0,0,0,.18));
  --shadow-soft: var(--shadow-soft, 0 8px 24px rgba(0,0,0,.12));
  --glow-brand: var(--glow-brand, 0 0 0 2px rgba(124,92,255,.35), 0 0 24px rgba(124,92,255,.22));

  --font-body: var(--font-body, Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif);
  --font-head: var(--font-head, Montserrat, Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif);

  /* ВАЖНО: ты уже ушёл на fsBody/fsBtn..., поэтому font-size лучше не держать как отдельный токен */
  --font-size: var(--font-size, 14px);

  /* safe-area / tabbar sizing */
  --safe-bottom: min(env(safe-area-inset-bottom, 0px), 20px);
  --tabbar-h: 64px;

  /* legacy mapping */
  --bg: var(--color-bg);
  --fg: var(--color-text);
  --sub: var(--color-muted);
  --acc: var(--color-brand);
  --line: rgba(255,255,255,.10);

  /* === aliases for blocks (bridge) === */
  --accent: var(--color-brand);
  --onAccent: var(--btn-primary-text);
  --text: var(--color-text);
  --muted: var(--color-muted);

  --surface: var(--color-surface);

  /* FALLBACKS (без color-mix) */
  --surface2: var(--color-surface);

  --card: var(--color-card);

  /* для блоков, которые ждут card-bg/border */
  --card-bg: var(--color-card);
  --card-border: var(--color-border);

  --brand: var(--color-brand);
  --btnPrimaryBg: var(--btn-primary-bg);
  --btnPrimaryText: var(--btn-primary-text);

  --r-card: var(--radius-card);
  --r-btn: var(--radius-btn);
  --r-input: var(--radius-input);

  /* numeric strengths (0..1) for blocks calculations */
  --shadow-a: .35;
  --glow-a: .35;
}

/* ===== Global typography bridge (FORCE blocks to inherit) ===== */
html,body{height:100%}
html, body{
  font-family: var(--font-body);
  font-size: var(--font-size);
}

body{
  margin:0;
  background:var(--color-bg);
  color:var(--color-text);
  line-height:1.55;
}

/* headings */
h1,h2,h3,h4,h5,h6,
.h1,.h2,.h3{
  font-family: var(--font-head);
}

/* Force inheritance inside blocks */
.blk, .block, [data-block], [data-key], [data-block-id]{
  font-family: inherit;
}
.blk *, .block *, [data-block] *, [data-key] *, [data-block-id] *{
  font-family: inherit;
}

/* Layout */
.container{
  padding:16px 16px calc(var(--tabbar-h) + var(--safe-bottom) + 20px);
}

/* ===== Cards ===== */
.card{
  background: var(--color-card);
  border:1px solid var(--color-border);
  border-radius: var(--radius-card);
  padding:12px;
  box-shadow: var(--shadow-soft);
}

/* ===== Section container ("Раздел") ===== */
.sec{
  padding:12px;
  background: var(--color-surface);
  border-radius: var(--radius-card);
}
.sec__hd{
  font-weight:800;
  font-size:18px;
  margin:2px 2px 10px;
  opacity:.95;
}
.sec__bd{
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* ===== Tabbar ===== */
.tabbar{
  position:fixed;
  left:0; right:0; bottom:0;
  height: calc(var(--tabbar-h) + var(--safe-bottom));
  padding-bottom: max(0px, calc(var(--safe-bottom) - 16px));

  background: var(--tabbar-bg);
  border-top:1px solid var(--color-border);

  backdrop-filter:blur(16px);
  -webkit-backdrop-filter:blur(16px);

  display:grid;
  grid-template-columns:repeat(5,1fr);
  align-items:center;
  z-index:10;
}

.tab{
  display:grid;
  gap:3px;
  place-items:center;
  color:var(--tabbar-text);
  font-size:12px;
  cursor:pointer;
}
.tab.active{color:var(--tabbar-active)}

/* System box */
.sys{
  border:1px dashed var(--line);
  border-radius:14px;
  padding:12px;
  background:rgba(255,255,255,.03)
}
.sys h4{margin:0 0 8px}


.themeGroupTitle{
  font-weight: 900;
  font-size: 13px;
  opacity: .9;
  margin: 2px 0 10px;
}
.themeRow{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  align-items:center;
}
label.chk{ display:flex; gap:8px; align-items:center; }
.themeNote{
  font-size: 12px;
  opacity: .75;
  line-height: 1.3;
}
.themeNote code{
  padding:2px 6px;
  border-radius:8px;
  background: rgba(255,255,255,.06);
}
